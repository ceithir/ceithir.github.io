{"version":3,"sources":["features/navigation/reducer.js","characters.js","features/characters/Profile.js","features/characters/CharacterHeader.js","features/navigation/Section.js","features/party/reducer.js","features/design/ColumnsList.js","features/party/PartySelector.js","features/forest/directions.js","features/forest/reducer.js","features/forest/ForestSelector.js","features/debrief/Results.js","features/forest/Forest.js","features/library/books.js","features/library/reducer.js","features/library/BookSelector.js","features/city/locations.js","features/city/reducer.js","features/library/Library.js","features/city/CitySelector.js","features/city/City.js","features/debrief/EndingSection.js","features/debrief/Debrief.js","Game.js","Settings.js","About.js","App.js","app/store.js","i18n.js","index.js"],"names":["initialState","chapter","section","subsection","instantText","step","fadingOut","slice","createSlice","name","reducers","setSection","state","action","payload","nextSubSection","toggleInstantText","setChapter","nextStep","setFadingOut","actions","selectSection","navigation","selectSubSection","selectInstantText","selectChapter","selectStep","selectFadingOut","DEJANIRE","MAHARAL","RASHOMON","CETO","ALECTO","CAROLE","KATRINA","TEKELI","CAMILLA","character","t","Title","Typography","Link","standardizedAnswers","freeTextAnswers","profiles","nature","humanoid","species","impetus","bookishness","orderedKeys","FakeLink","children","useTranslation","title","disabled","FakeName","className","dataSource","i18n","profile","map","key","includes","description","exists","find","filter","Fragment","Trans","i18nKey","values","Boolean","Profile","level","renderItem","Item","Meta","Text","CharacterHeader","useState","showRecord","setShowRecord","strong","shape","size","onClick","placement","visible","onClose","width","Paragraph","FadeInAndScrollTo","useSelector","useEffect","window","scrollTo","top","document","body","scrollHeight","behavior","Animate","transitionName","transitionAppear","SubSection","text","split","paragraph","index","toString","dangerouslySetInnerHTML","__html","sanitizeHtml","ContinueButton","React","forwardRef","ref","buttonRef","useRef","useImperativeHandle","click","current","focus","refDefined","e","preventDefault","stopPropagation","SubSections","subsections","length","Controls","AnimationBlock","AnimationContainer","animationId","fadeOutBeforeAction","scrollUpOnAppear","transitionEnter","transitionLeave","showProp","onEnd","_","RawSection","canClickOnWholeCard","hideButton","continueRef","dispatch","useDispatch","setVisible","actualAction","data-character","hoverable","Heading","Section","next","translated","hideLastButton","heading","subSectionIndex","substring","language","translatedText","showAll","visibleSubsections","forest","library","city","addToParty","location","push","selectParty","party","ColumnsList","props","grid","gutter","column","xs","PartyCard","arr","len","fill","full","data-location","blur","bordered","concat","Array","LocationCard","PartySelector","WEST","DIRECTIONS","success","assignations","total","score","sendTo","direction","forEach","rearrangedDirections","ForestRoseWind","Group","onChange","event","target","value","Button","ForestSelector","characters","Results","context","data","tplus","params","conclusion","type","footer","Forest","goTo","stepUp","forestParty","adventures","tree","Object","keys","returnObjects","defaultValue","join","fallbackKey","completed","every","introduction","parts","BOOKS","SLOW","GOOD","slots","quality","assistants","Error","otherAssistant","max","fromEntries","assistSlots","mimicUnveiled","ghostFound","book","testimonyFound","result","s","baseScore","mod","reduce","acc","Math","char","unusedSlots","assignList","books","QualityEvaluation","version","BookCheckList","currentlyAssigned","maxedOut","options","label","BookSelector","POOR","OLD","LOCATIONS","demonFound","assign","forceAssign","Library","defaultParams","qualities","results","attentiveness","done","sort","CityButtons","places","CitySelector","adventure","compose","City","noAccess","assignCount","chara","Panel","Collapse","ENDINGS","Hints","forestSuccess","librarySuccess","citySuccess","EndingSection","entitiesFound","ending","findIndex","end","header","reload","Debrief","libraryParty","cityParty","forestSuccessFunc","librarySuccessFunc","citySuccessFunc","tekeliSpecial","alectoSpecial","base","Game","meetingOrder","i","indexOf","supportedLanguages","LanguageSelector","changeLanguage","toUpperCase","InstantTextToggler","checked","unCheckedChildren","checkedChildren","Settings","About","onCancel","App","configureStore","reducer","navigationReducer","partyReducer","forestReducer","libraryReducer","cityReducer","use","LanguageDetector","initReactI18next","init","ns","defaultNS","fallbackLng","interpolation","escapeValue","resources","en","all","fr","react","transKeepBasicHtmlNodesFor","ReactDOM","render","StrictMode","store","getElementById"],"mappings":"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","file":"static/js/main.6e7f7fec.chunk.js","sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\n\nconst initialState = {\n  chapter: null,\n  section: null,\n  subsection: 0,\n  instantText: false,\n  step: 0,\n  fadingOut: false,\n};\n\nconst slice = createSlice({\n  name: \"navigation\",\n  initialState,\n  reducers: {\n    setSection: (state, action) => {\n      state.section = action.payload;\n      state.subsection = initialState.subsection;\n      state.step = initialState.step;\n    },\n    nextSubSection: (state) => {\n      state.subsection++;\n    },\n    toggleInstantText: (state) => {\n      state.instantText = !state.instantText;\n    },\n    setChapter: (state, action) => {\n      state.chapter = action.payload;\n      state.section = initialState.section;\n      state.subsection = initialState.subsection;\n      state.step = initialState.step;\n    },\n    nextStep: (state) => {\n      state.step++;\n    },\n    setFadingOut: (state, action) => {\n      state.fadingOut = action.payload;\n    },\n  },\n});\n\nexport const {\n  setSection,\n  nextSubSection,\n  toggleInstantText,\n  setChapter,\n  nextStep,\n  setFadingOut,\n} = slice.actions;\nexport const selectSection = (state) => state.navigation.section;\nexport const selectSubSection = (state) => state.navigation.subsection;\nexport const selectInstantText = (state) => state.navigation.instantText;\nexport const selectChapter = (state) => state.navigation.chapter;\nexport const selectStep = (state) => state.navigation.step;\nexport const selectFadingOut = (state) => state.navigation.fadingOut;\n\nexport default slice.reducer;\n","export const DEJANIRE = \"dejanire\";\nexport const MAHARAL = \"maharal\";\nexport const RASHOMON = \"rashomon\";\nexport const CETO = \"ceto\";\nexport const ALECTO = \"alecto\";\nexport const CAROLE = \"carole\";\nexport const KATRINA = \"katrina\";\nexport const TEKELI = \"tekeli\";\nexport const CAMILLA = \"camilla\";\nexport const GUEST = \"???\";\n\nexport const name = ({ character, t }) => t(`characters.${character}.name`);\n","import React from \"react\";\nimport { Typography, List, Tooltip } from \"antd\";\nimport { useTranslation, Trans } from \"react-i18next\";\nimport {\n  RASHOMON,\n  CETO,\n  ALECTO,\n  CAROLE,\n  KATRINA,\n  TEKELI,\n  CAMILLA,\n  DEJANIRE,\n  MAHARAL,\n  name,\n} from \"../../characters\";\nimport \"./Profile.less\";\n\nconst { Title, Link } = Typography;\n\nconst standardizedAnswers = [\"nature\", \"humanoid\", \"impetus\", \"bookishness\"];\nconst freeTextAnswers = [\"of-note\", \"job\"];\n\nconst profiles = {\n  [RASHOMON]: {\n    nature: \"flesh\",\n    humanoid: \"class-2\",\n    species: [\"oni\"],\n    impetus: \"average\",\n    bookishness: \"low\",\n  },\n  [CETO]: {\n    nature: \"flesh\",\n    humanoid: \"class-3\",\n    species: [\"lamia\", \"gorgon\"],\n    impetus: \"average\",\n    bookishness: \"high\",\n  },\n  [ALECTO]: {\n    nature: \"flesh\",\n    humanoid: \"class-3\",\n    species: [\"harpy\"],\n    impetus: \"good\",\n    bookishness: \"medium\",\n  },\n  [CAROLE]: {\n    nature: \"mixed\",\n    humanoid: \"class-1\",\n    species: [\"catgirl\", \"cheshire\"],\n    impetus: \"degraded\",\n    bookishness: \"low\",\n  },\n  [KATRINA]: {\n    nature: \"half-fay\",\n    humanoid: \"class-1\",\n    species: [\"dullahan\"],\n    impetus: \"average\",\n    bookishness: \"medium\",\n  },\n  [TEKELI]: {\n    nature: \"mixed\",\n    humanoid: \"class-7\",\n    species: [\"slime\"],\n    impetus: \"good\",\n    bookishness: \"null\",\n  },\n  [CAMILLA]: {\n    nature: \"dream\",\n    humanoid: \"class-1\",\n    species: [\"mask\"],\n    impetus: \"good\",\n    bookishness: \"null\",\n  },\n  [DEJANIRE]: {\n    nature: \"flesh\",\n    humanoid: \"class-3\",\n    species: [\"centaur\"],\n    impetus: \"bad\",\n    bookishness: \"high\",\n  },\n  [MAHARAL]: {\n    nature: \"composite\",\n    humanoid: \"class-7\",\n    species: [\"elemental\", \"golem\"],\n    impetus: \"average\",\n    bookishness: \"high\",\n  },\n};\n\nconst orderedKeys = [\n  \"nature\",\n  \"job\",\n  \"humanoid\",\n  \"appearance\",\n  \"impetus\",\n  \"bookishness\",\n  \"of-note\",\n];\n\nconst FakeLink = ({ children }) => {\n  const { t } = useTranslation();\n\n  return (\n    <Tooltip title={t(\"extras.profile.links.error\")}>\n      <Link disabled>{children}</Link>\n    </Tooltip>\n  );\n};\n\nconst FakeName = () => {\n  const { t } = useTranslation();\n\n  return (\n    <Tooltip title={t(\"extras.profile.names.error\")}>\n      <span className=\"avh-censored-text\">XXXXXXX</span>\n    </Tooltip>\n  );\n};\n\nconst dataSource = ({ character, t, i18n }) => {\n  const profile = profiles[character];\n  if (!profile) {\n    return [];\n  }\n\n  return orderedKeys\n    .map((key) => {\n      if (standardizedAnswers.includes(key)) {\n        if (!profile[key]) {\n          return null;\n        }\n\n        return {\n          title: t(`extras.profile.${key}.title`),\n          description: t(`extras.profile.${key}.${profile[key]}`),\n        };\n      }\n\n      if (freeTextAnswers.includes(key)) {\n        if (!i18n.exists(`characters.${character}.profile.${key}`)) {\n          return null;\n        }\n\n        return {\n          title: t(`extras.profile.${key}.title`),\n          description: t(`characters.${character}.profile.${key}`),\n        };\n      }\n\n      if (key === \"appearance\") {\n        if (\n          !profile[\"species\"].find((species) =>\n            i18n.exists(`extras.profile.appearance.${species}`)\n          ) ||\n          !i18n.exists(`characters.${character}.profile.appearance`)\n        ) {\n          return false;\n        }\n\n        return {\n          title: t(`extras.profile.appearance.title`),\n          description: (\n            <>\n              {profile[\"species\"]\n                .filter((species) =>\n                  i18n.exists(`extras.profile.appearance.${species}`)\n                )\n                .map((species) => {\n                  return (\n                    <React.Fragment key={species}>\n                      {t(`extras.profile.appearance.${species}.features`)}{\" \"}\n                      <FakeLink>\n                        <Trans\n                          i18nKey={\"extras.profile.links.see_more\"}\n                          values={{\n                            species: t(\n                              `extras.profile.appearance.${species}.name`\n                            ),\n                          }}\n                        />\n                      </FakeLink>\n                      <br />\n                    </React.Fragment>\n                  );\n                })}\n              {t(`characters.${character}.profile.appearance`)}\n            </>\n          ),\n        };\n      }\n\n      return null;\n    })\n    .filter(Boolean);\n};\n\nconst Profile = ({ character }) => {\n  const { t, i18n } = useTranslation();\n\n  return (\n    <div className=\"avh-character-profile\">\n      <Title level={3}>\n        {name({ t, character })} <FakeName />\n      </Title>\n      <List\n        dataSource={dataSource({ character, t, i18n })}\n        renderItem={({ title, description }) => (\n          <List.Item>\n            <List.Item.Meta title={title} description={description} />\n          </List.Item>\n        )}\n      />\n      <FakeLink>{t(\"extras.profile.links.see_all\")}</FakeLink>\n    </div>\n  );\n};\n\nexport default Profile;\n","import React, { useState } from \"react\";\nimport { Typography, Card, Button, Drawer } from \"antd\";\nimport \"./CharacterHeader.less\";\nimport { useTranslation } from \"react-i18next\";\nimport Profile from \"./Profile\";\nimport { name } from \"../../characters\";\n\nconst { Text } = Typography;\n\nconst CharacterHeader = ({ character }) => {\n  const [showRecord, setShowRecord] = useState(false);\n  const { t } = useTranslation();\n\n  return (\n    <Card className=\"avh-character-header\">\n      <Text strong>{name({ t, character })}</Text>\n      <Button shape=\"circle\" size=\"small\" onClick={() => setShowRecord(true)}>\n        ?\n      </Button>\n      <Drawer\n        placement={\"left\"}\n        visible={showRecord}\n        onClose={() => setShowRecord(false)}\n        width={\"min(100%, 512px)\"}\n      >\n        <Profile character={character} />\n      </Drawer>\n    </Card>\n  );\n};\n\nexport default CharacterHeader;\n","import React, { useEffect, useRef, useImperativeHandle } from \"react\";\nimport sanitizeHtml from \"sanitize-html\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport {\n  selectSubSection,\n  nextSubSection,\n  selectInstantText,\n  selectFadingOut,\n  setFadingOut,\n} from \"./reducer\";\nimport { Typography, Card, Button } from \"antd\";\nimport \"./Section.less\";\nimport Animate from \"rc-animate\";\nimport CharacterHeader from \"../characters/CharacterHeader\";\nimport { useTranslation } from \"react-i18next\";\nimport { name } from \"../../characters\";\n\nconst { Paragraph, Title } = Typography;\n\nconst FadeInAndScrollTo = ({ children }) => {\n  const instantText = useSelector(selectInstantText);\n\n  useEffect(() => {\n    if (instantText) {\n      return;\n    }\n    window.scrollTo({ top: document.body.scrollHeight, behavior: \"smooth\" });\n  }, [instantText]);\n\n  if (instantText) {\n    return <>{children}</>;\n  }\n\n  return (\n    <Animate transitionName=\"fade\" transitionAppear>\n      <div>{children}</div>\n    </Animate>\n  );\n};\n\nconst SubSection = ({ text }) => {\n  return (\n    <FadeInAndScrollTo>\n      <Paragraph>\n        {text.split(\"\\n\").map((paragraph, index) => {\n          return (\n            <p\n              key={index.toString()}\n              dangerouslySetInnerHTML={{ __html: sanitizeHtml(paragraph) }}\n            />\n          );\n        })}\n      </Paragraph>\n    </FadeInAndScrollTo>\n  );\n};\n\nconst ContinueButton = React.forwardRef(({ action }, ref) => {\n  const buttonRef = useRef();\n  useImperativeHandle(ref, () => ({\n    click: () => {\n      buttonRef.current.focus();\n      buttonRef.current.click();\n    },\n  }));\n  const refDefined = !!buttonRef.current;\n  const instantText = useSelector(selectInstantText);\n  useEffect(() => {\n    if (instantText) {\n      return;\n    }\n    buttonRef.current.focus();\n  }, [refDefined, instantText]);\n\n  return (\n    <Button\n      ref={buttonRef}\n      onClick={(e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        action();\n      }}\n    >\n      {\">>>\"}\n    </Button>\n  );\n});\n\nconst SubSections = ({ subsections }) => {\n  if (!subsections.length) {\n    return null;\n  }\n\n  return (\n    <div className=\"avh-subsections\">\n      {subsections.map((text, index) => {\n        return <SubSection key={index.toString()} text={text} />;\n      })}\n    </div>\n  );\n};\n\nconst Controls = React.forwardRef(({ action }, ref) => {\n  return (\n    <div className=\"avh-controls\">\n      <ContinueButton ref={ref} action={action} />\n    </div>\n  );\n});\n\nconst AnimationBlock = ({ children }) => {\n  return <div>{children}</div>;\n};\n\nconst AnimationContainer = ({\n  children,\n  animationId,\n  visible,\n  action,\n  fadeOutBeforeAction,\n  scrollUpOnAppear,\n}) => {\n  useEffect(() => {\n    if (!animationId) {\n      return;\n    }\n    if (scrollUpOnAppear) {\n      window.scrollTo({ top: 0, behavior: \"smooth\" });\n    }\n  }, [animationId, scrollUpOnAppear]);\n\n  if (!animationId) {\n    return <>{children}</>;\n  }\n\n  return (\n    <Animate\n      transitionName=\"fade\"\n      transitionEnter={false}\n      transitionLeave={fadeOutBeforeAction}\n      showProp=\"visible\"\n      onEnd={(_, exists) => {\n        if (!exists) {\n          action();\n        }\n      }}\n    >\n      <AnimationBlock key={animationId} visible={visible}>\n        {children}\n      </AnimationBlock>\n    </Animate>\n  );\n};\n\nconst RawSection = ({\n  character,\n  canClickOnWholeCard,\n  animationId,\n  action,\n  fadeOutBeforeAction,\n  children,\n  hideButton,\n}) => {\n  const continueRef = useRef();\n  const dispatch = useDispatch();\n  const visible = !useSelector(selectFadingOut);\n  const setVisible = (visible) => dispatch(setFadingOut(!visible));\n  const startFadingOut = () => setVisible(false);\n  const endFadingOutAndContinue = () => {\n    setVisible(true);\n    action();\n  };\n  const actualAction = fadeOutBeforeAction ? startFadingOut : action;\n  const scrollUpOnAppear = animationId && !fadeOutBeforeAction; // FIXME: Arcane rule\n\n  return (\n    <div data-character={character}>\n      {character && <CharacterHeader character={character} />}\n      <Card\n        className=\"avh-section\"\n        hoverable={canClickOnWholeCard}\n        onClick={() => canClickOnWholeCard && continueRef.current.click()}\n      >\n        <AnimationContainer\n          animationId={animationId}\n          visible={visible}\n          action={endFadingOutAndContinue}\n          fadeOutBeforeAction={fadeOutBeforeAction}\n          scrollUpOnAppear={scrollUpOnAppear}\n        >\n          {children}\n        </AnimationContainer>\n        {!!action && !hideButton && (\n          <Controls ref={continueRef} action={actualAction} />\n        )}\n      </Card>\n    </div>\n  );\n};\n\nconst Heading = ({ text }) => {\n  return (\n    <Title level={5} className=\"avh-section-heading\">\n      {text}\n    </Title>\n  );\n};\n\nconst Section = ({\n  text,\n  children,\n  next,\n  character,\n  translated = false,\n  hideLastButton = false,\n  heading,\n}) => {\n  const subSectionIndex = useSelector(selectSubSection);\n  const dispatch = useDispatch();\n  const instantText = useSelector(selectInstantText);\n  const { t, i18n } = useTranslation();\n\n  const animationId = (() => {\n    if (!text) {\n      return null;\n    }\n    if (translated) {\n      return text.substring(0, 32);\n    }\n    return `${i18n.language}.${text}`;\n  })();\n\n  const translatedText = (() => {\n    if (!text) {\n      return null;\n    }\n    if (translated) {\n      return text;\n    }\n    return t(text, { name: name({ t, character }) });\n  })();\n  const subsections = translatedText?.split(/\\n{2,}/) || [];\n  const showAll = (() => {\n    if (!text) {\n      return true;\n    }\n    if (instantText) {\n      return true;\n    }\n    if (children) {\n      return subSectionIndex >= subsections.length;\n    }\n    return subSectionIndex >= subsections.length - 1;\n  })();\n  const visibleSubsections = (() => {\n    if (showAll) {\n      return subsections;\n    }\n    return subsections.filter((_, index) => index <= subSectionIndex);\n  })();\n  const action = (() => {\n    if (showAll) {\n      return next;\n    }\n    return () => dispatch(nextSubSection());\n  })();\n  const canClickOnWholeCard = !!action && (!showAll || !children);\n\n  return (\n    <RawSection\n      character={character}\n      canClickOnWholeCard={canClickOnWholeCard}\n      animationId={animationId}\n      action={action}\n      fadeOutBeforeAction={!instantText && showAll && animationId && next}\n      hideButton={showAll && hideLastButton}\n    >\n      {heading && <Heading text={heading} />}\n      <SubSections subsections={visibleSubsections} />\n      {showAll && <FadeInAndScrollTo>{children}</FadeInAndScrollTo>}\n    </RawSection>\n  );\n};\n\nexport default Section;\n","import { createSlice } from \"@reduxjs/toolkit\";\nimport { DEJANIRE, MAHARAL, RASHOMON } from \"../../characters\";\n\nconst slice = createSlice({\n  name: \"party\",\n  initialState: {\n    forest: [DEJANIRE],\n    library: [MAHARAL],\n    city: [RASHOMON],\n  },\n  reducers: {\n    addToParty: (state, action) => {\n      const { character, location } = action.payload;\n      state[location].push(character);\n    },\n  },\n});\n\nexport const { addToParty } = slice.actions;\nexport const selectParty = (location) => (state) => state.party[location];\n\nexport default slice.reducer;\n","import React from \"react\";\nimport { List } from \"antd\";\n\nconst ColumnsList = ({ dataSource, ...props }) => {\n  return (\n    <List\n      grid={{\n        gutter: 16,\n        column: dataSource.length,\n        xs: 1,\n      }}\n      dataSource={dataSource}\n      {...props}\n    />\n  );\n};\n\nexport default ColumnsList;\n","import React, { useRef } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { selectParty, addToParty } from \"./reducer\";\nimport { Typography, Card, List, Button } from \"antd\";\nimport { useTranslation } from \"react-i18next\";\nimport \"./PartySelector.less\";\nimport { name } from \"../../characters\";\nimport ColumnsList from \"../design/ColumnsList\";\n\nconst { Text } = Typography;\n\nconst pad = (arr, len, fill) => arr.concat(Array(len).fill(fill)).slice(0, len);\n\nconst PartyCard = ({ party, location, full, onClick }) => {\n  const { t } = useTranslation();\n  const buttonRef = useRef();\n\n  return (\n    <Card\n      data-location={location}\n      title={t(`locations.${location}.title`)}\n      hoverable={!full}\n      onClick={() => {\n        buttonRef.current.blur();\n        onClick();\n      }}\n    >\n      <List\n        bordered={!full}\n        dataSource={pad(party, 3, \"placeholder\")}\n        renderItem={(character) => (\n          <List.Item>\n            <Text>{name({ t, character })}</Text>\n          </List.Item>\n        )}\n      />\n      <Button ref={buttonRef} disabled={full}>\n        {\"+\"}\n      </Button>\n    </Card>\n  );\n};\n\nconst LocationCard = ({ location, character, next }) => {\n  const party = useSelector(selectParty(location));\n  const dispatch = useDispatch();\n\n  const full = party.length >= 3;\n  const onClick = () => {\n    if (full) {\n      return;\n    }\n    dispatch(addToParty({ character, location }));\n    next();\n  };\n\n  return (\n    <PartyCard\n      party={party}\n      location={location}\n      full={full}\n      onClick={onClick}\n    />\n  );\n};\n\nconst PartySelector = ({ character, next }) => {\n  const locations = [\"forest\", \"library\", \"city\"];\n\n  return (\n    <ColumnsList\n      className=\"avh-party-selector\"\n      dataSource={locations}\n      renderItem={(location) => (\n        <List.Item key={location}>\n          <LocationCard\n            key={location}\n            location={location}\n            character={character}\n            next={next}\n          />\n        </List.Item>\n      )}\n    />\n  );\n};\n\nexport default PartySelector;\n","import {\n  DEJANIRE,\n  ALECTO,\n  CAMILLA,\n  CAROLE,\n  CETO,\n  KATRINA,\n  TEKELI,\n} from \"../../characters\";\n\nexport const NORTH = \"north\";\nexport const SOUTH = \"south\";\nexport const WEST = \"west\";\nexport const EAST = \"east\";\n\nexport const DIRECTIONS = [NORTH, EAST, SOUTH, WEST];\n\nexport const score = (assignations) => {\n  let total = 0;\n\n  switch (assignations[NORTH]) {\n    case ALECTO:\n    case CAROLE:\n      total += 1;\n      break;\n    case CAMILLA:\n    case KATRINA:\n      total += 2;\n      break;\n    case CETO:\n    case DEJANIRE:\n      total += 3;\n      break;\n    case TEKELI:\n      total += 4;\n      break;\n    default:\n      break;\n  }\n\n  switch (assignations[SOUTH]) {\n    case ALECTO:\n      total += 1;\n      break;\n    case DEJANIRE:\n    case KATRINA:\n      total += 2;\n      break;\n    case CETO:\n      total += 3;\n      break;\n    case CAMILLA:\n    case TEKELI:\n      total += 4;\n      break;\n    default:\n      break;\n  }\n\n  switch (assignations[WEST]) {\n    case TEKELI:\n    case CAROLE:\n      total += 1;\n      break;\n    case CETO:\n    case DEJANIRE:\n      total += 3;\n      break;\n    default:\n      break;\n  }\n\n  switch (assignations[EAST]) {\n    case ALECTO:\n      total += 1;\n      break;\n    case CAMILLA:\n      total += 2;\n      break;\n    case CETO:\n    case DEJANIRE:\n    case KATRINA:\n    case CAROLE:\n      total += 3;\n      break;\n    case TEKELI:\n      total += 4;\n      break;\n    default:\n      break;\n  }\n\n  return total;\n};\n\nexport const divineFound = (assignations) => {\n  return [DEJANIRE, CAMILLA].includes(assignations[SOUTH]);\n};\n\nexport const success = (assignations) => score(assignations) >= 7;\n","import { createSlice } from \"@reduxjs/toolkit\";\nimport { DIRECTIONS } from \"./directions\";\n\nconst slice = createSlice({\n  name: \"forest\",\n  initialState: {},\n  reducers: {\n    sendTo: (state, action) => {\n      const { character, direction } = action.payload;\n      DIRECTIONS.forEach((direction) => {\n        if (state[direction] === character) {\n          state[direction] = null;\n        }\n      });\n      state[direction] = character;\n    },\n  },\n});\n\nexport const { sendTo } = slice.actions;\nexport const selectForest = () => (state) => state.forest;\n\nexport default slice.reducer;\n","import React from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { selectForest, sendTo } from \"./reducer\";\nimport { Card, Radio, List, Typography } from \"antd\";\nimport { CAROLE, name } from \"../../characters\";\nimport \"./ForestSelector.less\";\nimport { useTranslation } from \"react-i18next\";\nimport { DIRECTIONS, SOUTH, NORTH, WEST, EAST } from \"./directions\";\nimport ColumnsList from \"../design/ColumnsList\";\n\nconst { Text } = Typography;\n\nconst rearrangedDirections = [NORTH, WEST, EAST, SOUTH];\n\nconst ForestRoseWind = ({ character }) => {\n  const forest = useSelector(selectForest());\n  const dispatch = useDispatch();\n  const { t } = useTranslation();\n\n  return (\n    <Card>\n      <Text strong>{name({ t, character })}</Text>\n      <Radio.Group\n        onChange={(event) => {\n          dispatch(sendTo({ character, direction: event.target.value }));\n        }}\n        value={DIRECTIONS.find((direction) => forest[direction] === character)}\n      >\n        {rearrangedDirections.map((direction) => {\n          const disabled = (() => {\n            if (character === CAROLE && direction === SOUTH) {\n              return true;\n            }\n            return !!forest[direction] && forest[direction] !== character;\n          })();\n\n          return (\n            <Radio.Button key={direction} value={direction} disabled={disabled}>\n              {t(`locations.forest.directions.${direction}`)}\n            </Radio.Button>\n          );\n        })}\n      </Radio.Group>\n    </Card>\n  );\n};\n\nconst ForestSelector = ({ characters }) => {\n  return (\n    <ColumnsList\n      className=\"avh-forest-selector\"\n      dataSource={characters}\n      renderItem={(character) => (\n        <List.Item key={character}>\n          <ForestRoseWind key={character} character={character} />\n        </List.Item>\n      )}\n    />\n  );\n};\n\nexport default ForestSelector;\n","import React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { Typography, List } from \"antd\";\nimport { name } from \"../../characters\";\n\nconst { Text, Title } = Typography;\n\nconst Results = ({ context, success, data }) => {\n  const { t } = useTranslation();\n  const tplus = (key, params) => t(`extras.results.${context}.${key}`, params);\n\n  const conclusion = success ? (\n    <Text strong type=\"success\">\n      {tplus(\"good\")}\n    </Text>\n  ) : (\n    <Text strong type=\"warning\">\n      {tplus(\"bad\")}\n    </Text>\n  );\n\n  return (\n    <div className=\"avh-chapter-results\">\n      <Title level={3}>{t(\"extras.results.title\")}</Title>\n      <List\n        footer={conclusion}\n        dataSource={data}\n        renderItem={({ key, character, type }) => (\n          <List.Item>\n            <Text type={type}>\n              {tplus(key, { name: name({ character, t }) })}\n            </Text>\n          </List.Item>\n        )}\n      />\n    </div>\n  );\n};\n\nexport default Results;\n","import React from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport {\n  selectSection,\n  setSection,\n  selectStep,\n  nextStep,\n  setChapter,\n} from \"../navigation/reducer\";\nimport { useTranslation } from \"react-i18next\";\nimport Section from \"../navigation/Section\";\nimport {\n  CETO,\n  CAROLE,\n  CAMILLA,\n  ALECTO,\n  KATRINA,\n  DEJANIRE,\n  name,\n  TEKELI,\n} from \"../../characters\";\nimport { selectParty } from \"../party/reducer\";\nimport ForestSelector from \"./ForestSelector\";\nimport { selectForest } from \"./reducer\";\nimport { Typography } from \"antd\";\nimport { DIRECTIONS, WEST, success, EAST, SOUTH } from \"./directions\";\nimport Results from \"../debrief/Results\";\n\nconst { Paragraph } = Typography;\n\nconst Forest = () => {\n  const section = useSelector(selectSection);\n  const dispatch = useDispatch();\n  const { t } = useTranslation();\n  const goTo = (section) => () => dispatch(setSection(section));\n  const stepUp = () => dispatch(nextStep());\n  const forestParty = useSelector(selectParty(\"forest\"));\n  const forest = useSelector(selectForest());\n  const step = useSelector(selectStep);\n\n  const PLANNING = \"planning\";\n  const EXPLORATION = \"exploration\";\n  const RESULTS = \"results\";\n\n  if (section === RESULTS) {\n    const data = [\n      forestParty.includes(CETO) && {\n        key: \"optigirl\",\n        character: CETO,\n        type: \"success\",\n      },\n      forestParty.includes(TEKELI) &&\n        forest[WEST] !== TEKELI && {\n          key: \"optigirl\",\n          character: TEKELI,\n          type: \"success\",\n        },\n      [ALECTO, CAMILLA, KATRINA].includes(forest[WEST]) && {\n        key: \"beast\",\n        character: forest[WEST],\n        type: \"warning\",\n      },\n      forestParty.includes(ALECTO) &&\n        forest[WEST] !== ALECTO && {\n          key: \"citygirl\",\n          character: ALECTO,\n          type: \"warning\",\n        },\n      forestParty.includes(CAROLE) &&\n        forest[EAST] !== CAROLE && {\n          key: \"citygirl\",\n          character: CAROLE,\n          type: \"warning\",\n        },\n      [CAROLE, KATRINA].includes(forest[EAST]) && {\n        key: \"fairies\",\n        character: forest[EAST],\n        type: \"success\",\n      },\n      forestParty.includes(CETO) && {\n        key: \"dream\",\n      },\n      [CAMILLA, DEJANIRE].includes(forest[SOUTH]) && {\n        key: `ally.${forest[SOUTH]}`,\n      },\n    ].filter(Boolean);\n\n    return (\n      <Section next={() => dispatch(setChapter(\"library\"))}>\n        <Results context=\"forest\" success={success(forest)} data={data} />\n      </Section>\n    );\n  }\n\n  if (section === EXPLORATION) {\n    const root = \"story.forest.exploration\";\n\n    const adventures = DIRECTIONS.map((direction) => {\n      const character = forest[direction];\n      if (!character) {\n        return \"\";\n      }\n      const text = (() => {\n        if (\n          direction === WEST &&\n          [ALECTO, CAMILLA, KATRINA].includes(character)\n        ) {\n          const tree = `${root}.monster`;\n\n          return Object.keys(t(tree, { returnObjects: true }))\n            .map((index) => {\n              return t(`${tree}.${index}.${character}`, {\n                defaultValue: t(`${tree}.${index}.default`),\n              });\n            })\n            .join(\"\\n\\n\");\n        }\n\n        const key = `story.forest.exploration.${character}.${direction}`;\n        const fallbackKey = `story.forest.exploration.${character}.default`;\n        return t(key, {\n          defaultValue: t(fallbackKey, { name: name({ character, t }) }),\n        });\n      })();\n\n      return { character, text, direction };\n    }).filter(Boolean);\n    return (\n      <Section\n        text={adventures[step][\"text\"]}\n        character={adventures[step][\"character\"]}\n        next={!!adventures[step + 1] ? stepUp : goTo(RESULTS)}\n        translated={true}\n        heading={`${t(`locations.forest.name`)} – ${t(\n          `locations.forest.directions.${adventures[step][\"direction\"]}`\n        )}`}\n      />\n    );\n  }\n\n  if (section === PLANNING) {\n    const completed = forestParty.every((character) =>\n      Object.values(forest).includes(character)\n    );\n\n    return (\n      <Section\n        text={\"story.forest.planning\"}\n        next={completed && goTo(EXPLORATION)}\n      >\n        <ForestSelector characters={forestParty} />\n        {completed && (\n          <Paragraph>\n            <p>{t(\"story.forest.split\")}</p>\n          </Paragraph>\n        )}\n      </Section>\n    );\n  }\n\n  const introduction = (() => {\n    let parts = [{ key: \"part-1\", character: DEJANIRE }];\n\n    if (forestParty.includes(CETO)) {\n      parts.push({ key: \"ceto\", character: CETO });\n    }\n\n    parts.push({ key: \"part-2\", character: DEJANIRE });\n\n    if (forestParty.includes(CAMILLA)) {\n      parts.push({ key: \"camilla\", character: CAMILLA });\n    }\n\n    parts.push({ key: \"part-3\", character: DEJANIRE });\n\n    if (forestParty.includes(CAROLE)) {\n      parts.push({ key: \"carole\", character: CAROLE });\n    }\n\n    return parts;\n  })();\n  const current = introduction[step];\n\n  return (\n    <Section\n      text={`story.forest.introduction.${current[\"key\"]}`}\n      character={current[\"character\"]}\n      next={!!introduction[step + 1] ? stepUp : goTo(PLANNING)}\n    />\n  );\n};\n\nexport default Forest;\n","import {\n  CAMILLA,\n  TEKELI,\n  MAHARAL,\n  CETO,\n  KATRINA,\n  ALECTO,\n} from \"../../characters\";\n\nexport const MYSTERY = \"mystery\";\nexport const FANTASY = \"fantasy\";\nexport const MIMIC = \"mimic\";\nexport const ROMANCE = \"romance\";\nexport const COFFEE = \"coffee\";\nexport const SCIENCE = \"science\";\n\nexport const BOOKS = [MYSTERY, FANTASY, MIMIC, ROMANCE, COFFEE, SCIENCE];\n\nconst SLOW = [CAMILLA, TEKELI];\n\nexport const GOOD = \"good\";\nexport const AVERAGE = \"average\";\nexport const BAD = \"bad\";\n\nconst assistSlots = (assistants) => {\n  if (assistants.length !== 2) {\n    throw new Error(\"Groups of three only please\");\n  }\n\n  if (assistants.includes(CETO)) {\n    const otherAssistant = assistants.find((character) => character !== CETO);\n\n    return {\n      [CETO]: {\n        quality: GOOD,\n        max: 3,\n      },\n      [otherAssistant]: {\n        quality: GOOD,\n        max: SLOW.includes(otherAssistant) ? 1 : 2,\n      },\n    };\n  }\n\n  return Object.fromEntries(\n    assistants.map((character) => {\n      return [\n        character,\n        {\n          quality: SLOW.includes(character) ? AVERAGE : GOOD,\n          max: 2,\n        },\n      ];\n    })\n  );\n};\n\nexport const slots = (characters) => {\n  return {\n    [MAHARAL]: {\n      quality: BAD,\n    },\n    ...assistSlots(characters.filter((character) => character !== MAHARAL)),\n  };\n};\n\nexport const score = ({ characters, assignations }) => {\n  let result = 0;\n\n  const s = slots(characters);\n  const quality = (book) => s[assignations[book]][\"quality\"];\n\n  const unusedSlots = (quality) =>\n    characters.reduce((acc, character) => {\n      if (s[character][\"quality\"] !== quality) {\n        return acc;\n      }\n      return (\n        acc +\n        Math.max(\n          0,\n          s[character][\"max\"] -\n            Object.values(assignations).filter((char) => char === character)\n              .length\n        )\n      );\n    }, 0);\n\n  const baseScore = (book, mod = 0) => {\n    switch (quality(book)) {\n      case GOOD:\n        return 2 + mod;\n      case AVERAGE:\n        return 1 + mod;\n      default:\n        return 0;\n    }\n  };\n\n  result += unusedSlots(GOOD) * 1; // Leftover bonus\n\n  result += baseScore(MYSTERY, 1);\n  result += baseScore(FANTASY);\n\n  const coffeePenalty = [ALECTO, CETO].includes(assignations[COFFEE]) ? 0 : -1;\n  result += baseScore(COFFEE, coffeePenalty);\n\n  if (assignations[MIMIC] === TEKELI) {\n    result += 1;\n  }\n\n  result += assignations[ROMANCE] === KATRINA ? 3 : baseScore(ROMANCE);\n\n  if (testimonyFound({ characters, assignations })) {\n    result += 3;\n  }\n\n  return result;\n};\n\nexport const mimicUnveiled = (assignations) =>\n  !!assignations[MIMIC] && ![MAHARAL, CAMILLA].includes(assignations[MIMIC]);\n\nexport const ghostFound = (assignations) =>\n  [KATRINA, CETO].includes(assignations[ROMANCE]);\n\nexport const quality = ({ book, characters, assignations }) =>\n  slots(characters)[assignations[book]][\"quality\"];\n\nexport const testimonyFound = ({ characters, assignations }) => {\n  if (assignations[SCIENCE] === CAMILLA) {\n    return false;\n  }\n  return quality({ book: SCIENCE, characters, assignations }) === GOOD;\n};\n\nexport const success = ({ characters, assignations }) =>\n  mimicUnveiled(assignations) && score({ characters, assignations }) >= 8;\n","import { createSlice } from \"@reduxjs/toolkit\";\nimport { BOOKS } from \"./books\";\n\nconst slice = createSlice({\n  name: \"library\",\n  initialState: {},\n  reducers: {\n    assignList: (state, action) => {\n      const { character, books } = action.payload;\n      BOOKS.forEach((book) => {\n        if (state[book] === character) {\n          state[book] = null;\n        }\n      });\n      books.forEach((book) => {\n        state[book] = character;\n      });\n    },\n  },\n});\n\nexport const { assignList } = slice.actions;\nexport const selectLibrary = () => (state) => state.library;\n\nexport default slice.reducer;\n","import React from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { selectLibrary, assignList } from \"./reducer\";\nimport { Card, List, Checkbox, Typography, Tooltip } from \"antd\";\nimport { useTranslation } from \"react-i18next\";\nimport { BOOKS, slots, GOOD, BAD } from \"./books\";\nimport { name } from \"../../characters\";\nimport ColumnsList from \"../design/ColumnsList\";\n\nconst { Text, Paragraph } = Typography;\n\nconst QualityEvaluation = ({ quality, character }) => {\n  const { t } = useTranslation();\n  const text = (version) =>\n    t(`locations.library.quality.${quality}.${version}`, {\n      name: name({ t, character }),\n    });\n\n  const type =\n    quality === GOOD ? \"success\" : quality === BAD ? \"warning\" : \"average\";\n\n  return (\n    <Tooltip placement=\"top\" title={text(\"long\")}>\n      <Paragraph type={type}>{text(\"short\")}</Paragraph>\n    </Tooltip>\n  );\n};\n\nconst BookCheckList = ({ character, quality, max }) => {\n  const { t } = useTranslation();\n  const dispatch = useDispatch();\n  const library = useSelector(selectLibrary());\n\n  const currentlyAssigned = Object.keys(library).filter(\n    (book) => library[book] === character\n  );\n  const maxedOut = max && currentlyAssigned.length >= max;\n  const options = BOOKS.map((book) => {\n    const disabled = (() => {\n      if (library[book] === character) {\n        return false;\n      }\n      return maxedOut || library[book];\n    })();\n\n    return {\n      value: book,\n      label: t(`locations.library.books.${book}`),\n      disabled,\n    };\n  });\n  const onChange = (books) => {\n    dispatch(assignList({ character, books }));\n  };\n\n  return (\n    <Card>\n      <Text strong>{name({ t, character })}</Text>\n      {max && (\n        <Text strong={maxedOut}>{` ${currentlyAssigned.length}/${max}`}</Text>\n      )}\n      <QualityEvaluation quality={quality} character={character} />\n      <Checkbox.Group\n        options={options}\n        onChange={onChange}\n        value={currentlyAssigned}\n      />\n    </Card>\n  );\n};\n\nconst BookSelector = ({ characters }) => {\n  return (\n    <ColumnsList\n      className=\"avh-library-selector\"\n      dataSource={characters}\n      renderItem={(character) => (\n        <List.Item key={character}>\n          <BookCheckList\n            key={character}\n            character={character}\n            {...slots(characters)[character]}\n          />\n        </List.Item>\n      )}\n    />\n  );\n};\n\nexport default BookSelector;\n","import {\n  RASHOMON,\n  ALECTO,\n  KATRINA,\n  CAMILLA,\n  TEKELI,\n  CAROLE,\n} from \"../../characters\";\n\nexport const POOR = \"poor\";\nexport const OLD = \"old\";\nexport const RICH = \"rich\";\nexport const SUPERMARKET = \"supermarket\";\nexport const BANK = \"bank\";\nexport const LOCATIONS = [OLD, RICH, SUPERMARKET, BANK, POOR];\nexport const SPECIAL = \"special\";\n\nexport const score = (assignations) => {\n  let result = 0;\n\n  if ([TEKELI, CAROLE].includes(assignations[POOR])) {\n    result += 1;\n  }\n\n  if ([TEKELI, ALECTO].includes(assignations[OLD])) {\n    result += 1;\n  }\n\n  if ([CAMILLA, KATRINA].includes(assignations[BANK])) {\n    result += 1;\n  }\n\n  if (assignations[SPECIAL]) {\n    result += 1;\n  }\n\n  if (Object.values(assignations).includes(ALECTO)) {\n    result += 1;\n  }\n\n  return result;\n};\n\nexport const demonFound = (assignations) =>\n  [RASHOMON, CAMILLA, KATRINA].includes(assignations[BANK]);\n\nexport const success = (assignations) => score(assignations) >= 2;\n","import { createSlice } from \"@reduxjs/toolkit\";\nimport { LOCATIONS, POOR } from \"./locations\";\nimport { TEKELI } from \"../../characters\";\n\nconst slice = createSlice({\n  name: \"city\",\n  initialState: {},\n  reducers: {\n    assign: (state, action) => {\n      const { character, location } = action.payload;\n      LOCATIONS.filter(\n        (location) => character !== TEKELI || location !== POOR\n      ).forEach((location) => {\n        if (state[location] === character) {\n          state[location] = null;\n        }\n      });\n      state[location] = character;\n    },\n    forceAssign: (state, action) => {\n      const { character, location } = action.payload;\n      state[location] = character;\n    },\n  },\n});\n\nexport const { assign, forceAssign } = slice.actions;\nexport const selectCity = () => (state) => state.city;\n\nexport default slice.reducer;\n","import React from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport {\n  selectSection,\n  setSection,\n  selectStep,\n  nextStep,\n  setChapter,\n} from \"../navigation/reducer\";\nimport Section from \"../navigation/Section\";\nimport {\n  CETO,\n  KATRINA,\n  MAHARAL,\n  TEKELI,\n  ALECTO,\n  CAROLE,\n  CAMILLA,\n  GUEST,\n} from \"../../characters\";\nimport { selectParty } from \"../party/reducer\";\nimport BookSelector from \"./BookSelector\";\nimport { selectLibrary } from \"../library/reducer\";\nimport {\n  BOOKS,\n  slots,\n  BAD,\n  GOOD,\n  success,\n  MYSTERY,\n  mimicUnveiled,\n  MIMIC,\n  SCIENCE,\n  testimonyFound,\n  quality,\n  FANTASY,\n  ROMANCE,\n} from \"../library/books\";\nimport Results from \"../debrief/Results\";\nimport { forceAssign } from \"../city/reducer\";\nimport { SPECIAL } from \"../city/locations\";\nimport { useTranslation } from \"react-i18next\";\n\nconst Library = () => {\n  const section = useSelector(selectSection);\n  const step = useSelector(selectStep);\n  const dispatch = useDispatch();\n  const goTo = (section) => () => dispatch(setSection(section));\n  const stepUp = () => dispatch(nextStep());\n  const party = useSelector(selectParty(\"library\"));\n  const library = useSelector(selectLibrary());\n  const { t } = useTranslation();\n\n  const PLANNING = \"planning\";\n  const READING = \"reading\";\n  const RESULTS = \"results\";\n\n  const nextChapter = () => dispatch(setChapter(\"city\"));\n\n  if (section === CAMILLA) {\n    return (\n      <Section\n        text={\"story.library.camilla\"}\n        character={CAMILLA}\n        next={goTo(RESULTS)}\n      />\n    );\n  }\n\n  if (section === RESULTS) {\n    const defaultParams = { characters: party, assignations: library };\n\n    const data = [\n      library[MYSTERY] !== BAD && {\n        key: \"dragon\",\n        character: library[MYSTERY],\n        type: \"success\",\n      },\n      mimicUnveiled(library) && {\n        key: \"mimic\",\n        character: library[MIMIC],\n        type: \"success\",\n      },\n      testimonyFound({ ...defaultParams }) && {\n        key: \"testimony\",\n        character: library[SCIENCE],\n        type: \"success\",\n      },\n      (quality({ book: FANTASY, ...defaultParams }) ||\n        quality({ book: MYSTERY, ...defaultParams })) && {\n        key: \"overkill\",\n        type: \"warning\",\n      },\n      [KATRINA, CETO].includes(library[ROMANCE]) && {\n        key: `ally.${library[ROMANCE]}`,\n      },\n      party.includes(CAMILLA) && {\n        key: \"dream\",\n      },\n    ].filter(Boolean);\n\n    return (\n      <Section next={nextChapter}>\n        <Results\n          context=\"library\"\n          success={success({ characters: party, assignations: library })}\n          data={data}\n        />\n      </Section>\n    );\n  }\n\n  if (section === READING) {\n    const qualities = slots(party);\n\n    const results = BOOKS.map((book) => {\n      const character = library[book];\n      const attentiveness = qualities[character][\"quality\"];\n\n      const key = (() => {\n        switch (book) {\n          case \"mystery\":\n            return attentiveness !== BAD && \"mystery\";\n          case \"fantasy\":\n            return `fantasy.${attentiveness === GOOD ? \"good\" : \"default\"}`;\n          case \"mimic\":\n            if (character === TEKELI) {\n              return \"mimic.tekeli\";\n            }\n            return (\n              [ALECTO, KATRINA, CETO, CAROLE].includes(character) &&\n              \"mimic.default\"\n            );\n          case \"coffee\":\n            return `coffee.${\n              [ALECTO, CETO].includes(character) ? \"good\" : \"default\"\n            }`;\n          case \"romance\":\n            return (\n              [CETO, KATRINA].includes(character) && `romance.${character}`\n            );\n          case \"science\":\n            if (character === CAMILLA) {\n              return \"science.camilla\";\n            }\n            return `science.${attentiveness === GOOD ? \"good\" : \"default\"}`;\n          default:\n            return false;\n        }\n      })();\n      return key && { text: `story.library.books.${key}`, character, book };\n    }).filter(Boolean);\n\n    const next = (() => {\n      if (results[step + 1]) {\n        return stepUp;\n      }\n      if (party.includes(CAMILLA)) {\n        return goTo(CAMILLA);\n      }\n      return goTo(RESULTS);\n    })();\n    return (\n      <Section\n        text={results[step][\"text\"]}\n        character={results[step][\"character\"]}\n        next={next}\n        heading={`${t(`locations.library.name`)} – ${t(\n          `locations.library.books.${results[step][\"book\"]}`\n        )}`}\n      />\n    );\n  }\n\n  if (section === PLANNING) {\n    const done = Object.values(library).filter(Boolean).length === BOOKS.length;\n    const next = () => {\n      if (library[ROMANCE] === KATRINA) {\n        dispatch(forceAssign({ character: GUEST, location: SPECIAL }));\n      }\n      goTo(READING)();\n    };\n\n    return (\n      <Section text={`story.library.planning`} next={done && next}>\n        <BookSelector characters={[...party].sort()} />\n      </Section>\n    );\n  }\n\n  const introduction = [MAHARAL, CETO, KATRINA].filter((character) =>\n    party.includes(character)\n  );\n  const character = introduction[step];\n\n  return (\n    <Section\n      text={`story.library.introduction.${character}`}\n      character={character}\n      next={!!introduction[step + 1] ? stepUp : goTo(PLANNING)}\n    />\n  );\n};\n\nexport default Library;\n","import React from \"react\";\nimport { Card, Radio, List, Typography } from \"antd\";\nimport { useTranslation } from \"react-i18next\";\nimport { LOCATIONS, POOR } from \"./locations\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { selectCity, assign } from \"./reducer\";\nimport { TEKELI, name } from \"../../characters\";\nimport \"./CitySelector.less\";\n\nconst { Text } = Typography;\n\nconst CityButtons = ({ character }) => {\n  const { t } = useTranslation();\n  const city = useSelector(selectCity());\n  const dispatch = useDispatch();\n\n  const places = LOCATIONS.filter(\n    (location) => character !== TEKELI || location !== POOR\n  );\n\n  return (\n    <Card>\n      <Text strong>{name({ t, character })}</Text>\n      <Radio.Group\n        onChange={(event) => {\n          dispatch(assign({ character, location: event.target.value }));\n        }}\n        value={places.find((location) => city[location] === character)}\n      >\n        {places.map((location) => {\n          const disabled = !!city[location] && city[location] !== character;\n\n          return (\n            <Radio.Button key={location} value={location} disabled={disabled}>\n              {t(`locations.city.locations.${location}`)}\n            </Radio.Button>\n          );\n        })}\n        {character === TEKELI && (\n          <Text type=\"secondary\" className=\"ant-radio-button-wrapper\">\n            + {t(`locations.city.locations.${POOR}`)}\n          </Text>\n        )}\n      </Radio.Group>\n    </Card>\n  );\n};\n\nconst CitySelector = ({ characters }) => {\n  return (\n    <List\n      className=\"avh-city-selector\"\n      dataSource={characters}\n      renderItem={(character) => (\n        <List.Item key={character}>\n          <CityButtons key={character} character={character} />\n        </List.Item>\n      )}\n    />\n  );\n};\n\nexport default CitySelector;\n","import React from \"react\";\nimport Section from \"../navigation/Section\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport {\n  selectSection,\n  setSection,\n  selectStep,\n  nextStep,\n  setChapter,\n} from \"../navigation/reducer\";\nimport {\n  TEKELI,\n  ALECTO,\n  CAROLE,\n  RASHOMON,\n  CAMILLA,\n  KATRINA,\n  name,\n} from \"../../characters\";\nimport { selectCity, forceAssign } from \"./reducer\";\nimport {\n  POOR,\n  OLD,\n  SUPERMARKET,\n  BANK,\n  LOCATIONS,\n  success,\n  RICH,\n  SPECIAL,\n} from \"./locations\";\nimport { selectParty } from \"../party/reducer\";\nimport CitySelector from \"./CitySelector\";\nimport { useTranslation } from \"react-i18next\";\nimport Results from \"../debrief/Results\";\n\nconst adventure = ({ location, character, t }) => {\n  const tplus = (key) =>\n    t(`story.city.locations.${key}`, { name: name({ t, character }) });\n  const compose = (...keys) => {\n    return keys.map((key) => tplus(key)).join(\"\\n\\n\");\n  };\n\n  switch (location) {\n    case POOR:\n      if (![TEKELI, CAROLE].includes(character)) {\n        return compose(\"poor.intro\", \"poor.failure\");\n      }\n      return compose(\"poor.intro\", `poor.${character}`, \"poor.success\");\n    case OLD:\n      if (![TEKELI, ALECTO].includes(character)) {\n        return compose(\"old.intro\", \"old.failure\");\n      }\n      return compose(\"old.intro\", `old.${character}`, \"old.success\");\n    case SUPERMARKET:\n      if (character === CAROLE) {\n        return compose(\"supermarket.default\", \"supermarket.carole\");\n      }\n      return tplus(\"supermarket.default\");\n    case BANK:\n      if (character === RASHOMON) {\n        return compose(\"bank.default\", \"bank.rashomon\");\n      }\n      if ([CAMILLA, KATRINA].includes(character)) {\n        return compose(\"bank.default\", \"bank.spirit\");\n      }\n      return tplus(\"bank.default\");\n    default:\n      return tplus(location);\n  }\n};\n\nconst City = () => {\n  const section = useSelector(selectSection);\n  const dispatch = useDispatch();\n  const goTo = (section) => () => dispatch(setSection(section));\n  const party = useSelector(selectParty(\"city\"));\n  const city = useSelector(selectCity());\n  const step = useSelector(selectStep);\n  const stepUp = () => dispatch(nextStep());\n  const { t } = useTranslation();\n\n  const RESULTS = \"results\";\n  if (section === RESULTS) {\n    const noAccess =\n      (city[POOR] && ![TEKELI, CAROLE].includes(city[POOR])) ||\n      (city[OLD] && ![ALECTO, TEKELI].includes(city[OLD]));\n\n    const data = [\n      [TEKELI, CAROLE].includes(city[POOR]) && {\n        key: \"poor\",\n        character: city[POOR],\n        type: \"success\",\n      },\n      [ALECTO, TEKELI].includes(city[OLD]) && {\n        key: \"old\",\n        character: city[OLD],\n        type: \"success\",\n      },\n      party.includes(ALECTO) && {\n        key: \"alecto\",\n        type: \"success\",\n      },\n      city[SPECIAL] && {\n        key: \"spider\",\n        type: \"success\",\n      },\n      noAccess && {\n        key: \"no-access\",\n        type: \"warning\",\n      },\n      (city[RICH] || city[SUPERMARKET]) && {\n        key: \"useless\",\n        type: \"warning\",\n      },\n      [(CAMILLA, RASHOMON, KATRINA)].includes(city[BANK]) && {\n        key: \"ally\",\n        character: city[BANK],\n      },\n      party.includes(CAROLE) && {\n        key: \"dream\",\n      },\n    ].filter(Boolean);\n    return (\n      <Section next={() => dispatch(setChapter(\"finale\"))}>\n        <Results context=\"city\" success={success(city)} data={data} />\n      </Section>\n    );\n  }\n\n  const ACTION = \"action\";\n  if (section === ACTION) {\n    const parts = [\n      party.includes(CAROLE) && {\n        text: t(\"story.city.carole\"),\n        character: CAROLE,\n      },\n      party.includes(ALECTO) && {\n        text: t(\"story.city.alecto\"),\n        character: ALECTO,\n      },\n      ...LOCATIONS.filter((location) => !!city[location]).map((location) => {\n        const character = city[location];\n        return {\n          text: adventure({ location, character, t }),\n          character,\n          heading: `${t(`locations.city.name`)} – ${t(\n            `locations.city.locations.${location}`\n          )}`,\n        };\n      }),\n    ].filter(Boolean);\n    const { text, character, heading } = parts[step];\n    return (\n      <Section\n        text={text}\n        character={character}\n        translated={true}\n        next={parts[step + 1] ? stepUp : goTo(RESULTS)}\n        heading={heading}\n      />\n    );\n  }\n\n  const SPLIT = \"split\";\n  if (section === SPLIT) {\n    if (party.includes(TEKELI) && !city[POOR]) {\n      return <Section text={`story.city.split`} next={goTo(TEKELI)} />;\n    }\n\n    const completed = party.every((character) => {\n      const assignCount = Object.values(city).filter(\n        (chara) => chara === character\n      ).length;\n      if (character === TEKELI) {\n        return assignCount === 2;\n      }\n      return assignCount === 1;\n    });\n    const next = goTo(ACTION);\n\n    return (\n      <Section text={\"story.city.split\"} next={completed && next}>\n        <CitySelector characters={party} />\n      </Section>\n    );\n  }\n\n  if (section === TEKELI) {\n    return (\n      <Section\n        text={`story.city.tekeli`}\n        character={TEKELI}\n        next={() => {\n          dispatch(forceAssign({ character: TEKELI, location: POOR }));\n          goTo(SPLIT)();\n        }}\n      />\n    );\n  }\n\n  return (\n    <Section\n      text={`story.city.introduction`}\n      character={RASHOMON}\n      next={goTo(SPLIT)}\n    />\n  );\n};\n\nexport default City;\n","import React from \"react\";\nimport { Typography, Card, Button, Collapse } from \"antd\";\nimport { useTranslation, Trans } from \"react-i18next\";\nimport Section from \"../navigation/Section\";\nimport \"./EndingSection.less\";\n\nconst { Paragraph } = Typography;\nconst { Panel } = Collapse;\n\nconst HOPE = \"hope\";\nconst RESPITE = \"respite\";\nconst BAD = \"bad\";\nconst ENDINGS = [BAD, RESPITE, HOPE];\n\nconst Hints = ({ forestSuccess, librarySuccess, citySuccess, tplus }) => {\n  return (\n    <>\n      {!forestSuccess && <Paragraph>{tplus(\"hints.forest\")}</Paragraph>}\n      {!librarySuccess && <Paragraph>{tplus(\"hints.library\")}</Paragraph>}\n      {!citySuccess && <Paragraph>{tplus(\"hints.city\")}</Paragraph>}\n    </>\n  );\n};\n\nconst EndingSection = ({\n  forestSuccess,\n  librarySuccess,\n  citySuccess,\n  entitiesFound,\n}) => {\n  const { t } = useTranslation();\n  const tplus = (key, params) => t(`extras.endings.${ending}.${key}`, params);\n\n  const success = forestSuccess && librarySuccess && citySuccess;\n  const ending = success ? (entitiesFound ? HOPE : RESPITE) : BAD;\n\n  return (\n    <Section text={`story.debrief.endings.${ending}`}>\n      <Card\n        title={t(\"extras.endings.title\", {\n          name: tplus(\"name\"),\n          index: ENDINGS.findIndex((end) => ending === end) + 1,\n          total: ENDINGS.length,\n        })}\n        className=\"avh-ending\"\n      >\n        {ending !== HOPE && (\n          <Collapse>\n            <Panel header={t(\"extras.endings.hints\")}>\n              {ending === BAD && (\n                <Hints\n                  forestSuccess={forestSuccess}\n                  librarySuccess={librarySuccess}\n                  citySuccess={citySuccess}\n                  tplus={tplus}\n                />\n              )}\n              {ending === RESPITE && <Paragraph>{tplus(\"hint\")}</Paragraph>}\n            </Panel>\n          </Collapse>\n        )}\n        {ending === HOPE && (\n          <Paragraph>\n            <Trans i18nKey={\"extras.thanks\"} />\n          </Paragraph>\n        )}\n        <Button onClick={() => window.location.reload(true)}>\n          {t(\"ui.restart\")}\n        </Button>\n      </Card>\n    </Section>\n  );\n};\n\nexport default EndingSection;\n","import React from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport {\n  selectSection,\n  setSection,\n  selectStep,\n  nextStep,\n} from \"../navigation/reducer\";\nimport Section from \"../navigation/Section\";\nimport { CETO, CAROLE, CAMILLA, ALECTO } from \"../../characters\";\nimport { selectForest } from \"../forest/reducer\";\nimport { selectCity } from \"../city/reducer\";\nimport { selectLibrary } from \"../library/reducer\";\nimport {\n  WEST,\n  divineFound,\n  success as forestSuccessFunc,\n} from \"../forest/directions\";\nimport {\n  MIMIC,\n  ghostFound,\n  success as librarySuccessFunc,\n} from \"../library/books\";\nimport { demonFound, success as citySuccessFunc } from \"../city/locations\";\nimport { selectParty } from \"../party/reducer\";\nimport EndingSection from \"./EndingSection\";\n\nconst Debrief = () => {\n  const section = useSelector(selectSection);\n  const dispatch = useDispatch();\n  const goTo = (section) => () => dispatch(setSection(section));\n  const stepUp = () => dispatch(nextStep());\n  const forest = useSelector(selectForest());\n  const library = useSelector(selectLibrary());\n  const forestParty = useSelector(selectParty(\"forest\"));\n  const libraryParty = useSelector(selectParty(\"library\"));\n  const cityParty = useSelector(selectParty(\"city\"));\n  const city = useSelector(selectCity());\n  const step = useSelector(selectStep);\n\n  const forestSuccess = forestSuccessFunc(forest);\n  const librarySuccess = librarySuccessFunc({\n    characters: libraryParty,\n    assignations: library,\n  });\n  const citySuccess = citySuccessFunc(city);\n  const entitiesFound =\n    [divineFound(forest), demonFound(city), ghostFound(library)].filter(Boolean)\n      .length >= 2;\n  const tekeliSpecial =\n    [\n      forestParty.includes(CETO),\n      libraryParty.includes(CAMILLA),\n      cityParty.includes(CAROLE),\n    ].filter(Boolean).length >= 2;\n  const alectoSpecial = forest[WEST] === ALECTO || library[MIMIC] === ALECTO;\n\n  if (section === \"ending\") {\n    return (\n      <EndingSection\n        forestSuccess={forestSuccess}\n        librarySuccess={librarySuccess}\n        citySuccess={citySuccess}\n        entitiesFound={entitiesFound}\n      />\n    );\n  }\n\n  const parts = (() => {\n    const base = [alectoSpecial && \"alecto\", \"dejanire-intro\"].filter(Boolean);\n\n    if (!forestSuccess) {\n      return [...base, \"dejanire-failure\", \"werebeasts\"];\n    }\n\n    if (!librarySuccess) {\n      return [...base, \"maharal-failure\", \"book-burning\"];\n    }\n\n    if (!citySuccess) {\n      return [...base, \"maharal-success\", \"bad-reports\"];\n    }\n\n    if (tekeliSpecial) {\n      return [...base, \"maharal-success\", \"tekeli\", \"rashomon-success\"];\n    }\n\n    return [...base, \"maharal-success\", \"rashomon-success\"];\n  })();\n\n  return (\n    <Section\n      text={`story.debrief.${parts[step]}`}\n      next={parts[step + 1] ? stepUp : goTo(\"ending\")}\n    />\n  );\n};\n\nexport default Debrief;\n","import React from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport {\n  selectSection,\n  setSection,\n  selectChapter,\n  setChapter,\n  setFadingOut,\n  selectInstantText,\n} from \"./features/navigation/reducer\";\nimport Section from \"./features/navigation/Section\";\nimport PartySelector from \"./features/party/PartySelector\";\nimport {\n  CETO,\n  ALECTO,\n  CAROLE,\n  KATRINA,\n  TEKELI,\n  CAMILLA,\n  RASHOMON,\n} from \"./characters\";\nimport Forest from \"./features/forest/Forest\";\nimport Library from \"./features/library/Library\";\nimport City from \"./features/city/City\";\nimport Debrief from \"./features/debrief/Debrief\";\n\nconst Game = () => {\n  const section = useSelector(selectSection);\n  const dispatch = useDispatch();\n  const goTo = (section) => () => dispatch(setSection(section));\n  const chapter = useSelector(selectChapter);\n  const instantText = useSelector(selectInstantText);\n\n  if (chapter === \"finale\") {\n    return <Debrief />;\n  }\n\n  if (chapter === \"city\") {\n    return <City />;\n  }\n\n  if (chapter === \"forest\") {\n    return <Forest />;\n  }\n\n  if (chapter === \"library\") {\n    return <Library />;\n  }\n\n  const meetingOrder = [CETO, ALECTO, CAROLE, KATRINA, TEKELI, CAMILLA];\n  const i = meetingOrder.indexOf(section);\n  if (i > -1) {\n    const next = goTo(meetingOrder[i + 1] || RASHOMON);\n\n    return (\n      <Section\n        text={`story.meeting.${section}`}\n        character={meetingOrder[i]}\n        next={next}\n        hideLastButton={true}\n      >\n        <PartySelector\n          character={section}\n          next={instantText ? next : () => dispatch(setFadingOut(true))}\n        />\n      </Section>\n    );\n  }\n\n  switch (section) {\n    case RASHOMON:\n      return (\n        <Section\n          text={\"story.meeting.rashomon\"}\n          next={() => dispatch(setChapter(\"forest\"))}\n          character={RASHOMON}\n        />\n      );\n    default:\n      return (\n        <Section\n          text={\"story.meeting.introduction\"}\n          next={goTo(CETO)}\n          character={RASHOMON}\n        />\n      );\n  }\n};\n\nexport default Game;\n","import React from \"react\";\nimport \"./App.less\";\nimport { useTranslation } from \"react-i18next\";\nimport { Radio, Switch } from \"antd\";\nimport \"./transitions.less\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport {\n  selectInstantText,\n  toggleInstantText,\n} from \"./features/navigation/reducer\";\n\nconst supportedLanguages = [\"en\", \"fr\"];\n\nconst LanguageSelector = () => {\n  const { i18n } = useTranslation();\n\n  return (\n    <Radio.Group\n      onChange={(event) => i18n.changeLanguage(event.target.value)}\n      defaultValue={i18n.language}\n    >\n      {supportedLanguages.map((language) => {\n        return (\n          <Radio.Button key={language} value={language}>\n            {language.toUpperCase()}\n          </Radio.Button>\n        );\n      })}\n    </Radio.Group>\n  );\n};\n\nconst InstantTextToggler = () => {\n  const { t } = useTranslation();\n  const instantText = useSelector(selectInstantText);\n  const dispatch = useDispatch();\n\n  return (\n    <div className=\"instant-text-toggler\">\n      <Switch\n        checked={!instantText}\n        onClick={() => dispatch(toggleInstantText())}\n        unCheckedChildren={t(\"ui.instant-text-on\")}\n        checkedChildren={t(\"ui.instant-text-off\")}\n      />\n    </div>\n  );\n};\n\nconst Settings = () => {\n  return (\n    <>\n      <InstantTextToggler />\n      <LanguageSelector />\n    </>\n  );\n};\n\nexport default Settings;\n","import React, { useState } from \"react\";\nimport { Modal, Button, Typography } from \"antd\";\nimport { useTranslation } from \"react-i18next\";\n\nconst { Title, Paragraph } = Typography;\n\nconst About = () => {\n  const [visible, setVisible] = useState(false);\n  const { t } = useTranslation();\n\n  return (\n    <>\n      <Button shape=\"circle\" size=\"small\" onClick={() => setVisible(true)}>\n        ?\n      </Button>\n      <Modal visible={visible} onCancel={() => setVisible(false)} footer={null}>\n        <Title level={2}>{t(\"ui.title\")}</Title>\n        {Object.values(t(\"extras.credits\", { returnObjects: true })).map(\n          (text, index) => {\n            return <Paragraph key={index.toString()}>{text}</Paragraph>;\n          }\n        )}\n      </Modal>\n    </>\n  );\n};\n\nexport default About;\n","import React, { useEffect } from \"react\";\nimport \"./App.less\";\nimport Game from \"./Game\";\nimport { useTranslation } from \"react-i18next\";\nimport \"./transitions.less\";\nimport Settings from \"./Settings\";\nimport About from \"./About\";\n\nconst App = () => {\n  const { t } = useTranslation();\n  useEffect(() => {\n    document.title = t(\"ui.title\");\n  }, [t]);\n\n  return (\n    <>\n      <header>\n        <Settings />\n        <About />\n      </header>\n      <main>\n        <Game />\n      </main>\n    </>\n  );\n};\n\nexport default App;\n","import { configureStore } from \"@reduxjs/toolkit\";\nimport navigationReducer from \"../features/navigation/reducer\";\nimport partyReducer from \"../features/party/reducer\";\nimport forestReducer from \"../features/forest/reducer\";\nimport libraryReducer from \"../features/library/reducer\";\nimport cityReducer from \"../features/city/reducer\";\n\nexport default configureStore({\n  reducer: {\n    navigation: navigationReducer,\n    party: partyReducer,\n    forest: forestReducer,\n    library: libraryReducer,\n    city: cityReducer,\n  },\n});\n","import i18n from \"i18next\";\nimport LanguageDetector from \"i18next-browser-languagedetector\";\nimport { initReactI18next } from \"react-i18next\";\nimport en from \"./i18n/en.json\";\nimport fr from \"./i18n/fr.json\";\n\ni18n\n  .use(LanguageDetector)\n  .use(initReactI18next)\n  .init({\n    ns: [\"all\"],\n    defaultNS: \"all\",\n    fallbackLng: \"en\",\n    interpolation: {\n      escapeValue: false, // not needed for React\n    },\n    resources: { en: { all: en }, fr: { all: fr } },\n    react: {\n      transKeepBasicHtmlNodesFor: [\"br\", \"p\", \"strong\", \"em\"],\n    },\n  });\n\nexport default i18n;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport store from \"./app/store\";\nimport { Provider } from \"react-redux\";\nimport \"./i18n\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}